<%- include('../partials/navbar', { isLoggedIn: true }) %>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
<div class="container mt-4">

  <div class="row">

    <!-- add Transaction Card -->
    <div class="col-md-4">

      <div class="card shadow-sm mb-4">
        <div class="card-body">

          <h5 class="card-title mb-3">Add Transaction</h5>

          <form action="/transactions/create" method="POST">

            <div class="mb-3">
              <label class="form-label">Receiver</label>
              <input class="form-control" name="receiver" required>
            </div>

            <div class="mb-3">
              <label class="form-label">Amount</label>
              <input class="form-control" name="amount" type="number" required>
            </div>

            <button class="btn btn-primary w-100">
              Add Transaction
            </button>

          </form>

        </div>
      </div>

    </div>

    <!-- Transactions Table -->
    <div class="col-md-8">

      <div class="card shadow-sm">
        <div class="card-body">

          <h5 class="card-title mb-3">Your Transactions</h5>

          <% if (transactions.length === 0) { %>
            <p class="text-muted">No transactions yet.</p>
          <% } else { %>

          <table class="table table-hover align-middle">

            <thead class="table-light">
              <tr>
                <th>Receiver</th>
                <th>Date</th>
                <th class="text-end">Actions</th>
              </tr>
            </thead>

            <tbody>
              <% transactions.forEach(t => { %>
                <tr>
                  <td><%= t.receiver %></td>

                  <td>
                    <%= new Date(t.createdAt).toLocaleDateString() %>
                  </td>

                  <td class="text-end">

                    <a href="/transactions/<%= t.id %>/edit"
                       class="btn btn-sm btn-warning">
                      Edit
                    </a>

                    <form action="/transactions/<%= t.id %>/delete"
                          method="POST"
                          class="d-inline">
                      <button class="btn btn-sm btn-danger">
                        Delete
                      </button>
                    </form>

                  </td>
                </tr>
              <% }) %>
            </tbody>

          </table>

          <% } %>

        </div>
      </div>

    </div>

  </div>

</div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>
